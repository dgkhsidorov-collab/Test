<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ê–Ω—Ç–∏–∫–æ—Ä—É–ø—Ü—ñ–π–Ω–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä ‚Äî –ø–æ–≤–Ω–∏–π –∫–æ–º–ø–ª–µ–∫—Ç</title>
<style>
  :root{--bg:#0f172a; --card:#0b1220; --text:#e5e7eb; --muted:#94a3b8; --primary:#3b82f6; --accent:#22c55e; --accent-weak:#16a34a; --danger:#ef4444;}
  html,body{height:100%}
  body{margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial; background:radial-gradient(1200px 600px at 10% -10%, #0b1220, #0f172a); color:var(--text); display:flex; align-items:center; justify-content:center; padding:24px}
  .app{width:min(1000px,100%); background:rgba(11,18,32,.92); border:1px solid rgba(255,255,255,.06); border-radius:16px; box-shadow:0 10px 40px rgba(0,0,0,.5); overflow:hidden; z-index: 10;}
  header{padding:18px 22px; border-bottom:1px solid rgba(255,255,255,.08); display:flex; gap:12px; align-items:center}
  header .logo{width:36px;height:36px;border-radius:10px;display:grid;place-items:center; background: radial-gradient(100% 100% at 10% 0%, var(--primary), #06b6d4); font-weight:700}
  header h1{margin:0; font-size:18px}
  header p{margin:0; color:var(--muted); font-size:13px}
  main{padding:22px}
  .card{background: rgba(2,6,23,.6); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:18px}
  .row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
  .muted{color:var(--muted)}
  .case{white-space:pre-wrap; line-height:1.5; color:#dbeafe; background:rgba(59,130,246,.08); border:1px solid rgba(59,130,246,.2); padding:12px; border-radius:12px;}
  .question{font-size:18px; margin:14px 0 10px; font-weight:700}
  .answers{display:grid; gap:10px; margin:12px 0;}
  .btn{appearance:none; border:none; cursor:pointer; padding:10px 12px; border-radius:12px; background:#0b1324; color:var(--text); border:1px solid rgba(255,255,255,.08); text-align:left; transition:.15s ease}
  .btn:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.2)}
  .btn.primary{background: linear-gradient(180deg, var(--primary), #2563eb); text-align:center; font-weight:700}
  .btn.block{width:100%}
  .btn.correct{background:linear-gradient(180deg, var(--accent), var(--accent-weak)); border-color:transparent; color:#04120a}
  .btn.wrong{background:linear-gradient(180deg, var(--danger), #b91c1c); border-color:transparent; color:#140404}
  .chip{font-size:12px; color:var(--muted); background:rgba(148,163,184,.12); border:1px solid rgba(148,163,184,.25); padding:6px 10px; border-radius:999px}
  .progress{height:8px; width:100%; background:rgba(255,255,255,.06); border-radius:999px; overflow:hidden}
  .progress > div{height:100%; width:0; background:linear-gradient(90deg, #38bdf8, #6366f1); transition: width .25s ease}
  .timebar{height:10px; width:100%; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.08)}
  .timebar > div{height:100%; width:100%; background:linear-gradient(90deg, #22c55e, #f59e0b, #ef4444); transition: width 1s linear}
  .grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  @media (max-width: 760px){ .grid2{grid-template-columns:1fr} }
  input, select{background:#0b1324; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:10px 12px; border-radius:12px}
  table{width:100%; border-collapse:collapse; margin-top:10px}
  th, td{border-bottom:1px solid rgba(255,255,255,.06); padding:10px 8px; text-align:left; font-size:14px}
  th{color:#c7d2fe}
</style>

<style id="ua-flag-wallpaper-text">
/* Ukrainian flag background */
body{
  background-color:#0057B7 !important;
  /* –û–Ω–æ–≤–ª–µ–Ω–∏–π SVG, —Ç–µ–ø–µ—Ä –º—ñ—Å—Ç–∏—Ç—å –ª–∏—à–µ –ø—Ä–∞–ø–æ—Ä –±–µ–∑ —Ç–µ–∫—Å—Ç—É */
  background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%222400%22%20height%3D%221600%22%20viewBox%3D%220%200%202400%201600%22%3E%3Crect%20width%3D%222400%22%20height%3D%22800%22%20y%3D%220%22%20fill%3D%22%230057B7%22/%3E%3Crect%20width%3D%222400%22%20height%3D%22800%22%20y%3D%22800%22%20fill%3D%22%23FFD700%22/%3E%3C/svg%3E') !important;
  background-size: cover !important;
  background-attachment: fixed !importan
  t;
  background-position: center center !important;
}

/* –ù–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É –≤–Ω–∏–∑—É –µ–∫—Ä–∞–Ω–∞ */
.footer-text {
    position: fixed;
    bottom: 20px;
    left: 0;
    width: 100%;
    text-align: center;
    color: white;
    font-weight: bold;
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É, —â–æ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —à–∏—Ä–∏–Ω–∏ –µ–∫—Ä–∞–Ω–∞ */
    font-size: clamp(0.8rem, 2.2vw, 1.5rem);
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
    pointer-events: none; /* –î–æ–∑–≤–æ–ª—è—î –∫–ª—ñ–∫–∞—Ç–∏ "–∫—Ä—ñ–∑—å" —Ç–µ–∫—Å—Ç */
    line-height: 1.4;
    padding: 0 10px;
    box-sizing: border-box;
    z-index: 0;
}
</style>

</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="logo">AC</div>
      <div>
        <h1>–ê–Ω—Ç–∏–∫–æ—Ä—É–ø—Ü—ñ–π–Ω–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä ‚Äî –ø–æ–≤–Ω–∏–π –∫–æ–º–ø–ª–µ–∫—Ç</h1>
        <p class="muted">–ú—É–ª—å—Ç–∏–∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π ‚Ä¢ –¢–∞–π–º–µ—Ä ‚Ä¢ –†–µ–π—Ç–∏–Ω–≥ (Google Sheets)</p>
      </div>
    </header>
    <main>
      <div id="screen"></div>
    </main>
  </div>

  <!-- –ù–æ–≤–∏–π HTML-–µ–ª–µ–º–µ–Ω—Ç –¥–ª—è —Ç–µ–∫—Å—Ç—É -->
  <div class="footer-text">
    —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–∏–π –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª –∑ –ø–∏—Ç–∞–Ω—å –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è —Ç–∞ –≤–∏—è–≤–ª–µ–Ω–Ω—è –∫–æ—Ä—É–ø—Ü—ñ—ó<br>
    –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—ó –ø–æ–ª—ñ—Ü—ñ—ó –£–∫—Ä–∞—ó–Ω–∏
  </div>

<script>
// ======= –î–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω—å =======
const DATA = [{"case": "–ß–µ—Ä–µ–∑ –Ñ–¥–∏–Ω–∏–π –ø–æ—Ä—Ç–∞–ª –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤–∏–∫—Ä–∏–≤–∞—á—ñ–≤ –Ω–∞–¥—ñ–π—à–ª–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: –ø—ñ–¥ —á–∞—Å —Ç–µ–Ω–¥–µ—Ä—É —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–∞ –æ—Å–æ–±–∞ –≤–∏–∑–Ω–∞–ª–∞ –ø–µ—Ä–µ–º–æ–∂—Ü–µ–º –±–ª–∏–∑—å–∫—É —ó–π –æ—Å–æ–±—É.", "q": "–Ø–∫—ñ –ø–µ—Ä—à—ñ –¥—ñ—ó –º–∞—î –≤—á–∏–Ω–∏—Ç–∏ —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —É –ü–æ—Ä—Ç–∞–ª—ñ?", "a": ["–ü–µ—Ä–µ–¥–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–µ–∑ —Ä–æ–∑–≥–ª—è–¥—É", "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–≤—ñ–¥–æ–º—á—ñ—Å—Ç—å, –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –Ω–µ—É–ø–µ—Ä–µ–¥–∂–µ–Ω–∏–π —Ä–æ–∑–≥–ª—è–¥", "–ó–≤–µ—Ä–Ω—É—Ç–∏—Å—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –¥–æ –ø—ñ–¥–æ–∑—Ä—é–≤–∞–Ω–æ—ó –æ—Å–æ–±–∏", "–í—ñ–¥–∫–ª–∞—Å—Ç–∏ —Ä–æ–∑–≥–ª—è–¥ –¥–æ ¬´–∑—Ä—É—á–Ω–æ–≥–æ —á–∞—Å—É¬ª"], "correct": 1, "explain": "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–∫—Ä–∏–≤–∞—á–∞ —Ä–µ—î—Å—Ç—Ä—É—î—Ç—å—Å—è —Ç–∞ —Ä–æ–∑–≥–ª—è–¥–∞—î—Ç—å—Å—è –∑–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–æ—é; –∑–∞–±–µ–∑–ø–µ—á—É—î—Ç—å—Å—è –Ω–µ—É–ø–µ—Ä–µ–¥–∂–µ–Ω–∏–π —Ä–æ–∑–≥–ª—è–¥."}, {"case": "–ß/–∑ –ü–æ—Ä—Ç–∞–ª: –Ω–∞—á–∞–ª—å–Ω–∏–∫ –ì–£–ù–ü –¥—ñ—è–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ —ñ–Ω—Ç–µ—Ä–µ—Å—ñ–≤ —Ç–∞ –≤–Ω—ñ—Å –Ω–µ–¥–æ—Å—Ç–æ–≤—ñ—Ä–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ –≤ –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—é. –û—Ç—Ä–∏–º—É–≤–∞—á ‚Äî –∫–µ—Ä—ñ–≤–Ω–∏–∫ —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–æ–≥–æ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É, —è–∫–∏–π –π–æ–º—É –ø—ñ–¥–ø–æ—Ä—è–¥–∫–æ–≤—É—î—Ç—å—Å—è.", "q": "–©–æ –º–∞—î –∑—Ä–æ–±–∏—Ç–∏ –∫–µ—Ä—ñ–≤–Ω–∏–∫ —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–æ–≥–æ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É?", "a": ["–ó–∞–º–æ–≤—á–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é", "–ù–µ–≥–∞–π–Ω–æ –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –ù–ê–ó–ö —Ç–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ —Ä–æ–∑–≥–ª—è–¥ —ñ–Ω—à–æ–º—É –æ—Ä–≥–∞–Ω—É", "–û—Å–æ–±–∏—Å—Ç–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Ñ–∞–∫—Ç–∏ —â–æ–¥–æ —Å–≤–æ–≥–æ –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞", "–í—ñ–¥–º–æ–≤–∏—Ç–∏—Å—è –≤—ñ–¥ —Ä–æ–∑–≥–ª—è–¥—É –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω—å"], "correct": 1, "explain": "–ó–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –ø—ñ–¥–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è —ñ—Å–Ω—É—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç —ñ–Ω—Ç–µ—Ä–µ—Å—ñ–≤ ‚Äî –Ω–µ–æ–±—Ö—ñ–¥–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –ù–ê–ó–ö."}, {"case": "–ê–Ω–æ–Ω—ñ–º–Ω–∏–π –ø–æ–ª—ñ—Ü–µ–π—Å—å–∫–∏–π —á–µ—Ä–µ–∑ –ü–æ—Ä—Ç–∞–ª: –∫–µ—Ä—ñ–≤–Ω–∏–∫ –≤—á–∏–Ω–∏–≤ –∫—Ä–∏–º—ñ–Ω–∞–ª—å–Ω–µ –∫–æ—Ä—É–ø—Ü—ñ–π–Ω–µ –ø—Ä–∞–≤–æ–ø–æ—Ä—É—à–µ–Ω–Ω—è. –û–±—Å—Ç–∞–≤–∏–Ω –Ω–µ –Ω–∞–≤–µ–¥–µ–Ω–æ.", "q": "–Ø–∫—ñ –¥—ñ—ó –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó?", "a": ["–í—ñ–¥—Ö–∏–ª–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —è–∫ –±–µ–∑–¥–æ–∫–∞–∑–æ–≤–µ", "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –Ω–∞–¥–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å, –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–µ—Ä–≤–∏–Ω–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É", "–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ —Å–ª—É–∂–±–æ–≤–µ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è –±–µ–∑ –¥–∞–Ω–∏—Ö", "–ó–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–∞—è–≤–Ω–∏–∫–∞ –∑ –≤–∏–º–æ–≥–æ—é ¬´–ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏¬ª"], "correct": 1, "explain": "–ê–Ω–æ–Ω—ñ–º–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—ñ–¥–ª—è–≥–∞—é—Ç—å —Ä–æ–∑–≥–ª—è–¥—É; –∑–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ —Ñ–∞–∫—Ç—ñ–≤ —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–∏–π–º–∞—î—Ç—å—Å—è –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–µ—Ä–≤–∏–Ω–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏."}, {"case": "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: –∫–µ—Ä—ñ–≤–Ω–∏–∫ —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–æ–≥–æ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É –≤—á–∏–Ω–∏–≤ –∫–æ—Ä—É–ø—Ü—ñ–π–Ω–µ –ø—Ä–∞–≤–æ–ø–æ—Ä—É—à–µ–Ω–Ω—è. –í–æ–Ω–æ –ø–æ—Ç—Ä–∞–ø–∏–ª–æ –≤ –π–æ–≥–æ –∂ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç —É –ü–æ—Ä—Ç–∞–ª—ñ.", "q": "–©–æ –º–∞—î –∑—Ä–æ–±–∏—Ç–∏ –∫–µ—Ä—ñ–≤–Ω–∏–∫ —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–æ–≥–æ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É?", "a": ["–†–æ–∑–≥–ª—è–Ω—É—Ç–∏ —Å–≤–æ—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ", "–ü–µ—Ä–µ–¥–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ–Ω—à–æ–º—É —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–æ–º—É –æ—Ä–≥–∞–Ω—É, –ø–∏—Å—å–º–æ–≤–æ –∑–∞—è–≤–∏–≤—à–∏ –ø—Ä–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç —ñ–Ω—Ç–µ—Ä–µ—Å—ñ–≤", "–í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è", "–ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –∫–æ–ª–µ–≥ —Ç–∞ ¬´–≤–∏—Ä—ñ—à–∏—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ¬ª"], "correct": 1, "explain": "–°–∞–º–æ—Ä–æ–∑–≥–ª—è–¥ –Ω–µ–º–æ–∂–ª–∏–≤–∏–π: –Ω–∞—è–≤–Ω–∏–π —Ä–µ–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ñ–ª—ñ–∫—Ç —ñ–Ω—Ç–µ—Ä–µ—Å—ñ–≤ ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ç–Ω–æ–º—É –æ—Ä–≥–∞–Ω—É."}, {"case": "–î–æ –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞ –î–°–† –ù–ü–£: –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫ –û–ú–° –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –∞–¥–º—ñ–Ω–∫–æ—Ä—É–ø—Ü—ñ–π–Ω–µ –ø—Ä–∞–≤–æ–ø–æ—Ä—É—à–µ–Ω–Ω—è –∫–æ–ª–µ–≥ (–≥–ª–∞–≤–∞ 13-–ê –ö–£–ø–ê–ü). –î–∞–Ω—ñ –Ω–∞–≤–µ–¥–µ–Ω—ñ –ø–æ–≤–Ω—ñ—Å—Ç—é.", "q": "–Ø–∫—ñ –¥—ñ—ó –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞?", "a": ["–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –æ—Ä–≥–∞–Ω—É, —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–æ–≥–æ —Ä–æ–∑–≥–ª—è–¥–∞—Ç–∏", "–°–∞–º–æ—Å—Ç—ñ–π–Ω–æ –Ω–∞–∫–ª–∞—Å—Ç–∏ —à—Ç—Ä–∞—Ñ", "–ó–∞–ª–∏—à–∏—Ç–∏ –±–µ–∑ —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è", "–í–Ω–µ—Å—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —É —Å–ª—É–∂–±–æ–≤—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –∫–æ–ª–µ–≥"], "correct": 0, "explain": "–ê–¥–º—ñ–Ω—Å–ø—Ä–∞–≤–∏ –∑–∞ –≥–ª. 13-–ê –ö–£–ø–ê–ü —Ä–æ–∑–≥–ª—è–¥–∞—é—Ç—å —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω—ñ –æ—Ä–≥–∞–Ω–∏ (—Å—É–¥–∏, –ù–ê–ó–ö —Ç–æ—â–æ)."}, {"case": "–ü–æ—à—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫ —É–ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–æ–≥–æ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É –ø–æ—Ä—É—à–∏–≤ –ó–∞–∫–æ–Ω ¬´–ü—Ä–æ –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∫–æ—Ä—É–ø—Ü—ñ—ó¬ª (–¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞—Ä–Ω–µ —Å—Ç—è–≥–Ω–µ–Ω–Ω—è).", "q": "–Ø–∫—ñ –¥—ñ—ó –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞ –æ—Ä–≥–∞–Ω—É?", "a": ["–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –ø—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ —Å–ª—É–∂–±–æ–≤—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —É —Ä–∞–∑—ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è ‚Äî –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞—Ä–Ω–µ —Å—Ç—è–≥–Ω–µ–Ω–Ω—è", "–ó–∞–ª–∏—à–∏—Ç–∏ –ª–∏—Å—Ç ¬´–±–µ–∑ —Ä—É—Ö—É¬ª", "–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞", "–ü–µ—Ä–µ–¥–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å–∞–º–æ–º—É –ø–æ—Ä—É—à–Ω–∏–∫—É –¥–ª—è —Ä–æ–∑–≥–ª—è–¥—É"], "correct": 0, "explain": "–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞—Ä–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å –ø–æ—Ç—Ä–µ–±—É—î —Å–ª—É–∂–±–æ–≤–æ–≥–æ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–µ–∂–Ω–æ—ó –ø—Ä–æ—Ü–µ–¥—É—Ä–∏."}, {"case": "–î–æ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ–∞–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –î–í–ë: –≥—Ä–æ–º–∞–¥—è–Ω–∏–Ω –¢ –∑–∞—è–≤–ª—è—î, —â–æ –ø–æ–ª—ñ—Ü–µ–π—Å—å–∫—ñ –≤–∏–º–∞–≥–∞—é—Ç—å 3000 –¥–æ–ª. –°–®–ê –∑–∞ –≤–∏–∑–Ω–∞–Ω–Ω—è –ø–æ—Ç–µ—Ä–ø—ñ–ª–∏–º —É –∫—Ä–∏–º—ñ–Ω–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—ñ.", "q": "–Ø–∫—ñ –¥—ñ—ó –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞ –æ—Ä–≥–∞–Ω—É –ø–æ–ª—ñ—Ü—ñ—ó?", "a": ["–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è, –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –ø—Ä–æ–∫—É—Ä–∞—Ç—É—Ä—É —Ç–∞ –æ—Ä–≥–∞–Ω –¥–æ—Å—É–¥–æ–≤–æ–≥–æ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è", "¬´–í–∏—Ä—ñ—à–∏—Ç–∏ –Ω–∞ –º—ñ—Å—Ü—ñ¬ª –∑ –ø—ñ–¥–æ–∑—Ä—é–≤–∞–Ω–∏–º–∏", "–í—ñ–¥–∫–ª–∞—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É", "–ü–æ—Ä–∞–¥–∏—Ç–∏ –≥—Ä–æ–º–∞–¥—è–Ω–∏–Ω—É —Å–∞–º–æ–º—É –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å—É–¥—É"], "correct": 0, "explain": "–û–∑–Ω–∞–∫–∏ –∫—Ä–∏–º—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ—Ä—É–ø—Ü—ñ–π–Ω–æ–≥–æ –ø—Ä–∞–≤–æ–ø–æ—Ä—É—à–µ–Ω–Ω—è ‚Äî –Ω–µ–≥–∞–π–Ω—ñ –ø—Ä–æ—Ü–µ—Å—É–∞–ª—å–Ω—ñ –¥—ñ—ó —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Å–ª—ñ–¥—Å—Ç–≤–∞/–ø—Ä–æ–∫—É—Ä–∞—Ç—É—Ä–∏."}];

// ======= –ü–∞—Ä–∞–º–µ—Ç—Ä–∏/—É—Ç–∏–ª—ñ—Ç–∏ =======
// *** –í–ë–£–î–û–í–ê–ù–ê –ê–î–†–ï–°–ê –ë–ï–ö–ï–ù–î–£ ***
const SERVER_URL = "https://script.google.com/macros/s/AKfycbzD-sqCtJeMpI-ZqAp08IhR51_c8U7W2AwJt_Umth3Os0HXrI6BE_y4kQtMtUZ54PoFPA/exec";

const $ = s => document.querySelector(s);
const screen = $("#screen");

function shuffle(arr){ const a = arr.slice(); for(let i=a.length-1;i>0;i--){ const j = Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }

// –¢–µ–ø–µ—Ä —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î –≤–±—É–¥–æ–≤–∞–Ω—É –∞–¥—Ä–µ—Å—É
function getServerUrl(){ return SERVER_URL; }

async function postResult(payload){
  const url = getServerUrl();
  if (!url) return {ok:false, disabled:true};
  try{
    const res = await fetch(url, {
      method:'POST',
      headers:{'Content-Type':'text/plain'},
      body: JSON.stringify(payload)
    });
    return await res.json();
  }catch(e){ return {ok:false, error:String(e)}}
}

async function getLeaderboard(session){
  const url = getServerUrl();
  if (!url) return {ok:false, disabled:true, rows:[]};
  try{
    const res = await fetch(url + "?session=" + encodeURIComponent(session||'default'));
    return await res.json();
  }catch(e){ return {ok:false, error:String(e), rows:[]};}
}

// ======= –°—Ç–∞–Ω =======
let order = [];
let idx = 0;
let answersOrder = [];
let score = 0;
let timePerQuestion = 30;
let remaining = 0;
let timerId = null;
let playerName = "";
let sessionCode = "session1";
let isFinished = false; // –ü—Ä–∞–ø–æ—Ä–µ—Ü—å –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–æ–≤—Ç–æ—Ä–Ω—ñ–π –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ

function startScreen(){
  screen.innerHTML = `
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <div>
          <h2 style="margin:0 0 8px 0">–ü–æ—á–Ω—ñ–º–æ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</h2>
          <div class="muted">–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è —Ç–∞ –∫–æ–¥ —Å–µ—Å—ñ—ó, —â–æ–± –ø–æ—á–∞—Ç–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º—É—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.</div>
        </div>
        <div class="row">
          <button class="btn" onclick="leaderboardScreen()">üèÜ –†–µ–π—Ç–∏–Ω–≥</button>
        </div>
      </div>

      <div class="grid2" style="margin:12px 0">
        <div class="row" style="gap:8px">
          <input id="name" placeholder="–Ü–º'—è —É—á–∞—Å–Ω–∏–∫–∞" />
          <input id="sess" placeholder="–ö–æ–¥ —Å–µ—Å—ñ—ó (–Ω–∞–ø—Ä. session1)" value="session1" />
        </div>
        <div class="row">
          <label>‚è±Ô∏è –õ—ñ–º—ñ—Ç –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è:&nbsp;
            <select id="timeSel">
              <option value="10">10 —Å</option>
              <option value="20">20 —Å</option>
              <option value="30" selected>30 —Å</option>
              <option value="45">45 —Å</option>
              <option value="60">60 —Å</option>
            </select>
          </label>
        </div>
      </div>

      <div class="row" style="gap:10px">
        <button class="btn primary" onclick="startQuiz()">‚ñ∂ –ü–æ—á–∞—Ç–∏</button>
      </div>

      <div class="card" style="margin-top:12px">
        <div class="muted">–ë–µ–∫–µ–Ω–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ.</div>
      </div>
    </div>
  `;
}

function leaderboardScreen(){
  screen.innerHTML = `
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <div class="row">
          <input id="sessBoard" placeholder="–ö–æ–¥ —Å–µ—Å—ñ—ó" value="${sessionCode}" />
          <button class="btn" onclick="refreshBoard()">–û–Ω–æ–≤–∏—Ç–∏</button>
        </div>
        <div class="row">
          <button class="btn" onclick="startScreen()">‚Üê –ù–∞ –≥–æ–ª–æ–≤–Ω—É</button>
        </div>
      </div>
      <div id="board" style="margin-top:8px"></div>
    </div>
  `;
  refreshBoard();
}

async function refreshBoard(){
  const sess = document.getElementById('sessBoard').value || 'session1';
  const res = await getLeaderboard(sess);
  const board = document.getElementById('board');
  if (!res.ok){
    board.innerHTML = `<div class="muted">–ù–µ–º–∞—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–µ–∫–µ–Ω–¥—É –∞–±–æ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞.</div>`;
    return;
  }
  const rows = res.rows || [];
  let html = `<table>
    <thead><tr><th>#</th><th>–Ü–º'—è</th><th>–ë–∞–ª</th><th>–ó –ø–∏—Ç–∞–Ω—å</th><th>%</th><th>‚è±</th><th>–ß–∞—Å</th></tr></thead><tbody>`;
  rows.forEach((r,i)=>{
    html += `<tr>
      <td>${i+1}</td>
      <td>${r.name||''}</td>
      <td>${r.score}</td>
      <td>${r.total}</td>
      <td>${Math.round(r.percent)}%</td>
      <td>${r.timePerQuestion}s</td>
      <td>${(r.timestamp||'').toString().replace('T',' ').replace('Z','')}</td>
    </tr>`;
  });
  html += `</tbody></table>`;
  board.innerHTML = html;

  setTimeout(refreshBoard, 5000);
}

function startQuiz(){
  playerName = (document.getElementById('name')?.value || '').trim() || 'anonymous';
  sessionCode = (document.getElementById('sess')?.value || '').trim() || 'session1';
  const sel = document.getElementById("timeSel");
  if (sel) timePerQuestion = parseInt(sel.value, 10) || 30;

  order = shuffle([...Array(DATA.length).keys()]);
  idx = 0;
  score = 0;
  answersOrder = order.map(() => shuffle([0,1,2,3]));
  isFinished = false; // –°–∫–∏–¥–∞—î–º–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å –Ω–∞ –ø–æ—á–∞—Ç–∫—É –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç—É
  renderQuestion();
}

function setupTimer(){
  clearTimer();
  remaining = timePerQuestion;
  updateTimerUI();
  timerId = setInterval(()=>{
    remaining--;
    if (remaining <= 0){ clearTimer(); timeUp(); }
    else updateTimerUI();
  }, 1000);
}

function clearTimer(){ if (timerId){ clearInterval(timerId); timerId = null; } }

function updateTimerUI(){
  const chip = document.getElementById("timeChip");
  const bar = document.getElementById("timeBar");
  if (chip) chip.textContent = `‚è≥ –ó–∞–ª–∏—à–∏–ª–æ—Å—å: ${remaining} —Å`;
  if (bar){ const pct = Math.max(0, Math.min(100, Math.round((remaining/timePerQuestion)*100))); bar.style.width = pct + "%"; }
}

function renderQuestion(){
  const i = order[idx];
  const item = DATA[i];
  const map = answersOrder[idx];
  const answers = map.map(m => item.a[m]);

  const progressPct = Math.round((idx)/DATA.length*100);
  screen.innerHTML = `
    <div class="card">
      <div class="row" style="justify-content:space-between;">
        <div class="row">
          <div class="chip">–ó–∞–≤–¥–∞–Ω–Ω—è ${idx+1} / ${DATA.length}</div>
          <div class="chip">–ë–∞–ª—ñ–≤: ${score}</div>
          <div class="chip" id="timeChip">‚è≥ –ó–∞–ª–∏—à–∏–ª–æ—Å—å: -- —Å</div>
        </div>
        <div class="row">
          <button class="btn" onclick="leaderboardScreen()">üèÜ –†–µ–π—Ç–∏–Ω–≥</button>
          <button class="btn" onclick="startScreen()">‚Ü∫ –°–∫–∏–Ω—É—Ç–∏</button>
        </div>
      </div>
      <div class="progress" style="margin:10px 0 8px;"><div style="width:${progressPct}%"></div></div>
      <div class="timebar" style="margin:6px 0 16px;"><div id="timeBar"></div></div>
      <div class="case">${item.case}</div>
      <div class="question">${item.q}</div>
      <div class="answers">
        ${answers.map((t, k)=>`<button class="btn" id="ans_${k}" onclick="selectAnswer(${k})">${k+1}) ${t}</button>`).join("")}
      </div>
      <div id="feedback" style="display:none; gap:12px; margin-top:8px"></div>
      <div class="row" style="justify-content:space-between; margin-top:8px">
        <div class="muted">–û–±–∏—Ä–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —á–∞—Å—É</div>
        <div class="row">
          <button class="btn" onclick="prev()" title="–ù–∞–∑–∞–¥">‚Üê –ù–∞–∑–∞–¥</button>
          <button class="btn primary" onclick="skip()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏</button>
          <button class="btn" onclick="next()">–î–∞–ª—ñ ‚Üí</button>
        </div>
      </div>
    </div>
  `;
  setupTimer();
}

function disableButtonsAndReveal(correctShownIndex, clickedIndex){
  for(let b=0;b<4;b++){
    const el = document.getElementById("ans_"+b);
    if (!el) continue;
    el.disabled = true;
    if (b === correctShownIndex) el.classList.add("correct");
    if (clickedIndex !== null && b === clickedIndex && clickedIndex !== correctShownIndex) el.classList.add("wrong");
  }
}

function showFeedback(msg){
  const fb = document.getElementById("feedback");
  if (!fb) return;
  fb.style.display = "block";
  fb.innerHTML = `<div class="case" style="background:rgba(34,197,94,.08); border-color:rgba(34,197,94,.25); color:#d1fae5">${msg}</div>`;
}

function selectAnswer(k){
  clearTimer();
  const i = order[idx];
  const item = DATA[i];
  const map = answersOrder[idx];
  const correctShownIndex = map.indexOf(item.correct);
  const isCorrect = (k === correctShownIndex);
  disableButtonsAndReveal(correctShownIndex, k);
  if (isCorrect) score++;
  showFeedback((isCorrect ? "‚úî –ü—Ä–∞–≤–∏–ª—å–Ω–æ!" : "‚úò –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.") + " " + item.explain);
}

function timeUp(){
  const i = order[idx];
  const item = DATA[i];
  const map = answersOrder[idx];
  const correctShownIndex = map.indexOf(item.correct);
  disableButtonsAndReveal(correctShownIndex, null);
  showFeedback("‚è∞ –ß–∞—Å –≤–∏–π—à–æ–≤. " + item.explain);
}

function skip(){ clearTimer(); timeUp(); }
function prev(){ if (idx<=0) return; clearTimer(); idx--; renderQuestion(); }
function next(){ clearTimer(); idx++; if (idx >= DATA.length) return finish(); renderQuestion(); }

async function finish(){
  // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∂–µ –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è
  if (isFinished) return;
  isFinished = true; // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å

  // –ü–æ–∫–∞–∑—É—î–º–æ –µ–∫—Ä–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —â–æ–± –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∫–ª—ñ–∫–∞–≤ –¥–∞–ª—ñ
  screen.innerHTML = `
    <div class="card">
        <h2 style="margin-top:0">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è</h2>
        <p class="muted">–ù–∞–¥—Å–∏–ª–∞—î–º–æ –≤–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç...</p>
    </div>
  `;

  const pct = Math.round((score/DATA.length)*100);
  const payload = { session: sessionCode, name: playerName, score, total: DATA.length, percent: pct, timePerQuestion };
  const res = await postResult(payload);

  // –ü–æ–∫–∞–∑—É—î–º–æ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  screen.innerHTML = `
    <div class="card">
      <h2 style="margin-top:0">–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
      <p class="muted">–í–∏ –Ω–∞–±—Ä–∞–ª–∏ <strong>${score}</strong> –∑ ${DATA.length} (${pct}%).</p>
      <div class="row" style="justify-content:space-between; margin-top:10px">
        <div class="row">
          <button class="btn primary" onclick="startQuiz()">–ü—Ä–æ–π—Ç–∏ —â–µ —Ä–∞–∑</button>
          <button class="btn" onclick="startScreen()">–ù–∞ –≥–æ–ª–æ–≤–Ω—É</button>
        </div>
        <div class="row">
          <button class="btn" onclick="leaderboardScreen()">üèÜ –ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–µ–π—Ç–∏–Ω–≥</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        ${res?.ok ? "–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ –¥–æ Google Sheets." : "‚ö†Ô∏è –ù–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –º–µ—Ä–µ–∂—ñ."}
      </div>
    </div>
  `;
}

// init
startScreen();
</script>
</body>
</html>
